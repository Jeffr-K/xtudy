# 생성 패턴 이용하기

객체 관리와 변경에 쉽게 대응하며 유지보수하기 쉬운 코드를 작성하기 위해 이번절에서는 생성형 디자인 패턴을 학습한다.

- 싱글톤 패턴
- 팩토리 메서드 패턴
- 추상 팩토리 패턴
- 빌더 패턴
- 프로토타입 패턴

# 싱글톤 패턴

싱글톤 패턴의 주요 개념은:

- 시스템에 인스턴스가 하나만 존재해야 한다
- 시스템의 모든 부분에서 인스턴스에 접근할 수 있어야 한다.

위 요구사항을 충족하기 위해 다음과 같은 요구사항이 존재한다:

1. 게으른 인스턴스 생성(lazy)
2. 스레드가 안전한 인스턴스 생성
3. 고성능의 인스턴스 생성

##### 게으른 인스턴스 생성

프로그램이 시작되자마자 싱글톤 인스턴스가 만들어지면 안된다. 인스턴스 생성에 많은 비용이 들 수 있기 때문이다.

따라서 인스턴스 생성은 필요한 첫 순간에 이루어져야 한다.

##### 스레드 안전한 인스턴스 생성

두 스레드가 동시에 싱글톤 객체를 생성하려고 할 때 두 스레드가 같은 인스턴스를 획득해야 한다.

##### 고성능의 인스턴스 생성

많은 스레드가 동시에 싱글톤 객체를 생성하려고 할 때 스레드를 너무 오래 기다리게 해서는 안된다.

잘못하면 실행이 중단될 수 있기 때문이다.

### 코틀린에서는 어떻게 싱글톤을 구현할 수 있을까?

자바와 C++ 에서 이를 구현하기 위해서 상당히 많은 코드가 필요했다. 하지만 코틀린에서는 싱글톤 객체 생성을 위해 object 라는 키워드가 도입됐다.

싱글톤은 일반적인 클래스와 동일한 방법으로 선언하되 생성자는 정의하지 않는다는 것이 중점이다.

object 키워드를 이용해 클래스를 작성하고 생성자를 별도로 두지 않는다.

```kotlin
object SingletonObject {
  init {
    println("싱글톤 객체에 처음 접근했다.")
  }
}
```

`init` 은 별도로 구성하지 않아도 된다. 이를 초기화 하는 코드는 다음과 같다.

```kotlin
val OnlyOneSingletonObject = SingletonObject
```
















# 팩토리 메서드 패턴

# 추상 팩토리 패턴

# 빌더 패턴

# 프로토타입 패턴